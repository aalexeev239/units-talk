<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <title>Unit testing</title>
        <link rel="stylesheet" href="../assets/css/reveal.css" />
        <link rel="stylesheet" href="../assets/css/custom.css" />

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="../assets/lib/css/monokai.css" />

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.type = "text/css";
            link.href = window.location.search.match(/print-pdf/gi)
                ? "../assets/css/print/pdf.css"
                : "../assets/css/print/paper.css";
            document.getElementsByTagName("head")[0].appendChild(link);
        </script>
    </head>
    <body class="en">
        <div id="flags" class="flags hidden" data-locale="en">
            <a href="" data-flag="en" title="en">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 480">
                    <defs>
                        <clipPath id="a">
                            <path fill-opacity=".7" d="M-85.3 0h682.6v512H-85.3z"/>
                        </clipPath>
                    </defs>
                    <g clip-path="url(#a)" transform="translate(80) scale(.94)">
                        <g stroke-width="1pt">
                            <path fill="#012169" d="M-256 0H768v512H-256z"/>
                            <path fill="#fff" d="M-256 0v57.2L653.5 512H768v-57.2L-141.5 0H-256zM768 0v57.2L-141.5 512H-256v-57.2L653.5 0H768z"/>
                            <path fill="#fff" d="M170.7 0v512h170.6V0H170.7zM-256 170.7v170.6H768V170.7H-256z"/>
                            <path fill="#c8102e" d="M-256 204.8v102.4H768V204.8H-256zM204.8 0v512h102.4V0H204.8zM-256 512L85.3 341.3h76.4L-179.7 512H-256zm0-512L85.3 170.7H9L-256 38.2V0zm606.4 170.7L691.7 0H768L426.7 170.7h-76.3zM768 512L426.7 341.3H503l265 132.5V512z"/>
                        </g>
                    </g>
                </svg>
            </a>
        
            <a href="" data-flag="ru" title="ru">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 480">
                    <g fill-rule="evenodd" stroke-width="1pt">
                        <path fill="#fff" d="M0 0h640v480H0z"/>
                        <path fill="#0039a6" d="M0 160h640v320H0z"/>
                        <path fill="#d52b1e" d="M0 320h640v160H0z"/>
                    </g>
                </svg>
            </a>
        </div>
        <div class="reveal">
            <div class="slides">
                   <section
    data-background="../assets/images/unit-main.jpg"
    class="animate-letters"
>
    <span>U</span>
    <span>N</span>
    <span>I</span>
    <span>T</span>
    <br />
    <span>T</span>
    <span>E</span>
    <span>S</span>
    <span>T</span>
    <span class="special">I</span>
    <span>N</span>
    <span>G</span>
</section>
 <section>
    <h2>What is unit</h2>
    <p>
        Unit test instantiates a
        <strong class="yellow">small portion</strong> of an
        application and tests its behavior
        <strong class="blue">independently</strong> from other
        parts
    </p>
</section>
 <section>
    <h2>It's an instrument</h2>
    <ul>
        <li>
            a <strong class="blue">part</strong> of an
            aplication like prod code
        </li>
        <li>
            owned by <strong class="green">team</strong>, not
            certain&nbsp;developers
        </li>
        <li>
            <strong class="red">helps</strong> to solve problems
        </li>
        <li>
            should be used
            <strong class="yellow">wisely</strong>
        </li>
    </ul>
</section>
 <section>
    <h2>Good unit tests are</h2>
    <ul class="text-small">
        <li class="fragment">
            <strong class="yellow">Fast</strong> <br />There
            will be thousands of tests in your app. Thousands.
        </li>
        <li class="fragment">
            <strong class="blue">Isolated</strong> <br />Units
            must be standalone, without any dependencies or side
            effects.
        </li>
        <li class="fragment">
            <strong class="red">Repeatable</strong> <br />Unit
            should be consistent with it result. The result
            shouldn't change unless you change something in
            code.
        </li>
        <li class="fragment">
            <strong class="green">Timely</strong> <br />Time for
            writing test should be comparable to writing code
        </li>
    </ul>
</section>
 <section>
    <h2>Must be <strong class="blue">UNIT</strong></h2>
    <div class="images">
        <div class="img-wrap">
            <img
                width="300"
                src="../assets/images/unit-part.jpg"
                alt="unit-part"
            />
            <svg
                class="img-icon check"
                width="60"
                height="60"
                viewBox="0 0 12 16"
                version="1.1"
                aria-hidden="true"
            >
                <path
                    fill-rule="evenodd"
                    d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"
                ></path>
            </svg>
        </div>
        <div class="img-wrap">
            <img
                width="300"
                src="../assets/images/unit-whole.gif"
                alt="unit-whole"
            />
            <svg
                class="img-icon circle-slash"
                width="60"
                height="60"
                viewBox="0 0 14 16"
                version="1.1"
                aria-hidden="true"
            >
                <path
                    fill-rule="evenodd"
                    d="M7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 1.3c1.3 0 2.5.44 3.47 1.17l-8 8A5.755 5.755 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zm0 11.41c-1.3 0-2.5-.44-3.47-1.17l8-8c.73.97 1.17 2.17 1.17 3.47 0 3.14-2.56 5.7-5.7 5.7z"
                ></path>
            </svg>
        </div>
    </div>
</section>
 <section>
    <h2>Testing <strong class="yellow">Pyramid</strong></h2>
    <img
        width="500"
        src="../assets/images/typical_pyramid.jpg"
        alt="typical pyramid"
    />
</section>
 <section>
    <h2><strong class="red">Unicorns</strong> and <strong class="green">rainbows</strong></h2>
    <div class="text text-left">
        <p>
            You have brilliant app with <strong class="yellow">low coupled modules</strong> and
            components. <strong class="blue">Independent layers</strong> of abstractions.
        </p>
        <p>
            Use units to test interactions from bottom to top on
            small pieces of code.
        </p>
    </div>
</section>
 <section>
    <h2>something&nbsp;<strong class="green">good</strong>, something&nbsp;<strong class="red">not</strong></h2>

    <div class="text text-left">
        <p>
            Your app is rather good with a portion of bugs and
            legacy.
        </p>
        <p>
            The biggest problem is to <strong class="blue">reduce dependencies</strong>
            between different parts of the system.
        </p>
        <p>
            Usually you add testing while <strong class="yellow">refactoring</strong> big parts.
        </p>
        <p>
            Add more <strong class="red">higher-level tests</strong> firstly. Then you can
            <strong class="green">extract low coupled components</strong> and cover them with
            units.
        </p>
    </div>
</section>
 <section>
    <h2>Holy sh<strong class="red">*</strong>t</h2>
    <div class="text text-left">
        <p>
            It's extraordinary hard to write units. <br>Lots of
            unpredictable behaviour.
        </p>
        <p>
            <strong class="green">Use higher-level tests</strong>, then rewrite code. <br>TDD is a
            an option.
        </p>
    </div>
</section>


                <section>
                    <h2>Code style</h2>
                    <p>
                        <a
                            href="https://github.com/aalexeev239/units-talk/tree/master/examples-en/"
                            target="_blank"
                        >
                             code examples
                            here 
                        </a>
                    </p>
                </section>

                <section>
    <h2>AAA. Arrange, Act, Assert</h2>
    <ul>
        <li>
            <strong class="red">Arrange</strong> your objects, creating and setting them up
            if&nbsp;necessary
        </li>
        <li><strong class="blue">Act</strong> on an object</li>
        <li><strong class="green">Assert</strong> that something is as expected</li>
    </ul>
</section>
 <section>
    <h2>AAA. Benefits</h2>
    <ul>
        <li>separate <strong class="red">test setup</strong> and <strong class="green">check</strong></li>
        <li>shows <strong class="yellow">what is being tested</strong> more clearly</li>
        <li>easy to read</li>
        <li>improves <strong class="blue">DRY</strong></li>
    </ul>
</section>
  <section>
    <h2>Naming matters</h2>
    <ul>
        <li>test suite can be used as a <strong class="blue">documentation</strong></li>
        <li>failure messages describe <strong class="red">what is broken</strong></li>
        <li>enforces a <strong class="yellow">good naming</strong> in code</li>
    </ul>
</section>

                <section>
    <h2>Naming tips</h2>
    <ul>
        <li>show <strong class="blue">class/method</strong> being tested</li>
        <li>
            use <strong class="green">describe</strong> to fold structure or
            conditions
        </li>
        <li>use <strong class="red">it</strong> to describe behaviour</li>
    </ul>
</section>
 <section>
    <h2><strong class="red">Minimum</strong> passable tests</h2>
    <ul>
        <li>tests are resistant to code changes</li>
        <li>closer to testing behavior over implementation</li>
        <li>no <strong class="yellow">magic</strong> values</li>
    </ul>
</section>
 <section>
    <h2>One test – one check</h2>
    <ul>
        <li><strong class="yellow">shows clearly</strong> what failed</li>
        <li>ensures you are not asserting multiple cases in your&nbsp;tests</li>
        <li>(but it's ok to test multiple properties of same object)</li>
    </ul>
</section>
 <section>
    <h2>Don't test <strong class="red">private</strong> methods</h2>
    <ul>
        <li><em>testing behaviour over implementation™</em></li>
        <li>private methods are never used standalone</li>
        <li>it's often indicates <strong class="blue">code smell</strong> 💩</li>
    </ul>
</section>
 <section>
    <h2>Avoid logic in tests</h2>
    <ul>
        <li>avoid loops and conditions – <strong class="green">keep code simple</strong></li>
        <li>less chance to make mistake in tests</li>
        <li>once more, <strong class="blue">focus on result</strong>, not test implementation</li>
    </ul>
</section>

                <section>
    <h2>Don't use constants in tests</h2>
    <ul>
        <li>my favorite <strong class="yellow"><em>testing behaviour over implementation™</em></strong></li>
    </ul>
</section>
 <section>
    <h2>Architecture tips</h2>
    <p><em>to be continued...</em></p>
    <img src="../assets/images/unit-test-passed.jpg" alt="unit-test-passed">
</section>
 <section>
    <h2>References</h2>
    <div class="text text-left">
        <ul>
            <li><a target="_blank" href="https://docs.microsoft.com/ru-ru/dotnet/core/testing/unit-testing-best-practices">Unit testing best practices with .NET Core and .NET Standard</a></li>
            <li><a target="_blank" href="https://github.com/CareMessagePlatform/jasmine-styleguide">Jasmine Style Guide</a></li>
            <li><a target="_blank" href="https://www.toptal.com/qa/how-to-write-testable-code-and-why-it-matters">Unit Tests, How to Write Testable Code and Why it Matters</a></li>
            <li><a target="_blank" href="https://dzone.com/articles/unit-testing-the-good-bad-amp-ugly">Unit Testing: The Good, Bad, and Ugly</a></li>
            <li><a target="_blank" href="https://techbeacon.com/app-dev-testing/no-1-unit-testing-best-practice-stop-doing-it">The No. 1 unit testing best practice: Stop doing it</a></li>
            <li><a target="_blank" href="https://www.hbo.com/westworld">[HBO] Westworld</a></li>
        </ul>
    </div>
</section>

            </div>
        </div>

        <script src="../assets/js/reveal.js"></script>
        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({
                showNotes:
                    document.location.search.indexOf("showNotes=true") >= 0,
                history: true,
                dependencies: [
                    { src: "../assets/plugin/markdown/marked.js" },
                    { src: "../assets/plugin/markdown/markdown.js" },
                    { src: "../assets/plugin/notes/notes.js", async: true },
                    {
                        src: "../assets/plugin/highlight/highlight.js",
                        async: true
                    }
                ]
            });

            function addFlag() {
                var wrapper = document.querySelector("#flags");

                if (!wrapper) {
                    return;
                }

                var currentLocale = wrapper.dataset.locale;
                var flags = Array.prototype.slice.call(
                    wrapper.querySelectorAll("a"),
                    0
                );

                flags.forEach(function(flag) {
                    flag.addEventListener("click", onFlagClick);

                    if (flag.dataset.flag === currentLocale) {
                        flag.classList.add('active')
                    }
                });

                function onFlagClick(event) {
                    event.preventDefault();
                    var target = event.currentTarget;
                    var targetLocale = target.dataset.flag;

                    if (targetLocale === currentLocale) {
                        return;
                    }

                    var newPathName = location.pathname.replace(
                        currentLocale,
                        targetLocale
                    );
                    var newUrl = location.origin + newPathName + location.hash;

                    location.replace(newUrl);
                }

                wrapper.classList.remove("hidden");
            }

            addFlag();
        </script>
    </body>
</html>
